{% extends 'auctions/layout.html' %}

{% block body %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-info">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    <div class="flex">
        <div class="w-100 text-center" style="max-height: 500px;">
            <img src="{{ item.image.url }}" alt="" style="max-width: 100%; height: 100%; min-width: 200px;">
        </div>
        <div class="w-100">
            <h1> {{ item.title }} </h1>
            <p class="description"> {{ item.description }} </p>
            <p><strong>Current Bid Price:</strong> ${{ item.bid }} </p>
            <p class="date"> Created: {{ item.date_listed }} by {{ item.user}} </p>
        </div>
        {% if user.is_authenticated %}
            <div class="w-100">
                <form action="{% url 'place_bid' item_id=item.id %}" style="display: inline;" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-primary">Bid</button>
                    <input type="number" name="bid_amount" required>
                </form>
                <button class="btn btn-primary">Add to Watchlist</button>
                {% if user == item.user %}
                    <button class="btn btn-primary">Close Auction</button>
                {% endif %}
            </div>
        {% endif %}
        <h3>Bid List</h3>
        <div class="bid-list">
            <ul style="list-style-type: none; padding: 0;">
                {% for bid in bids %}
                    <li> {{ bid.bidder }}: ${{ bid.amount }} </li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}